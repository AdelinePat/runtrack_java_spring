<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<h1 th:text="${message}">Message par défaut</h1>
<ul>
  <li th:each="obj : ${objList}" th:text="${obj}">mot par defaut</li>
</ul>
<form method="POST" action="/viewIGuess" th:object="${validForm}">
  <input th:field="*{welcome}" type="text" name="welcome" id="welcome" placeholder="name">
  <div th:if="${#fields.hasErrors('welcome')}" th:errors="*{welcome}"></div>

  <input th:field="*{anotherField}"  type="text" name="anotherField" id="anotherField" placeholder="anotherField">
  <div th:if="${#fields.hasErrors('anotherField')}" th:errors="*{anotherField}"></div>

  <input th:field="*{age}"  type="number" name="age" id="age">
  <div th:if="${#fields.hasErrors('age')}" th:errors="*{age}"></div>
  <button type="submit">Appuie sur le bouton</button>
</form>

<h3 th:text="${welcomeMessage}"></h3>

<h2>List of Persons in DB</h2>
<ul>
  <li th:each="p : ${persons}">
    <span th:text="${p.name}"></span> - <span th:text="${p.age}"></span>
  </li>
</ul>



<table>
  <thead>
  <tr>
    <th>ID</th><th>Nom</th><th>Âge</th><th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="aPerson : ${persons}">
    <td th:text="${aPerson.id}">1</td>

    <!-- UPDATE inline -->
    <td colspan="2" style="padding:0;">
      <form th:action="@{|/viewIGuess/${aPerson.id}/update|}" method="post" style="display:grid;grid-template-columns:1fr 110px auto;gap:.4rem;">
        <input name="personName" th:value="${aPerson.name}" required />
        <input name="personAge" type="number" min="0" th:value="${aPerson.age}" required />
        <button type="submit">Mettre à jour</button>
        <!-- Si Spring Security est activé, ajoute aussi le champ CSRF :
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        -->
      </form>
    </td>

    <!-- DELETE -->
    <td>
      <form th:action="@{|/viewIGuess/${aPerson.id}/delete|}" method="post">
        <button type="submit" onclick="return confirm('Supprimer cette personne ?')">Supprimer</button>
        <!-- CSRF si Security :
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        -->
      </form>
    </td>
  </tr>
  </tbody>
</table>

</body>
</html>